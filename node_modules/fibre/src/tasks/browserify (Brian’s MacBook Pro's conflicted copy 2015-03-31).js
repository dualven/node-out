module.exports = function(gulp, plugins, config) {

    gulp.task('browserify', function () {
        var browserified = plugins.vinylTransform(function(filename) {
        var b = plugins.browserify({entries: filename, debug: true});
        return b.bundle();
      });

      return gulp.src(config.jsSrcPath + '/main.js')
        .pipe(plugins.plumber({
            errorHandler: plugins.notify.onError("ERROR: JavaScript Compilation Failed")
          }))
        .pipe(browserified)
        .pipe(plugins.sourcemaps.init({loadMaps: true}))
        .pipe(plugins.sourcemaps.write('./'))
        .pipe(gulp.dest(config.jsDistPath));
    });

};